2024-07-04 14:01:18 | INFO | controller | 正在启动服务：
2024-07-04 14:01:18 | INFO | controller | 如需查看 服务日志 日志，请前往 /home/00_rag/fufan-chat-api/logs
2024-07-04 14:01:26 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1399803[0m]
2024-07-04 14:01:26 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:01:26 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:01:26 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:20001[0m (Press CTRL+C to quit)
2024-07-04 14:01:35 | INFO | controller | Register a new worker: http://192.168.110.131:21001
2024-07-04 14:01:35 | INFO | controller | Register done: http://192.168.110.131:21001, {'model_names': ['zhipu-api'], 'speed': 1, 'queue_length': 0}
2024-07-04 14:01:35 | INFO | stdout | [32mINFO[0m:     192.168.110.131:46240 - "[1mPOST /register_worker HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:01:36 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1400056[0m]
2024-07-04 14:01:36 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:01:36 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:01:36 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:20000[0m (Press CTRL+C to quit)
2024-07-04 14:01:37 | ERROR | stderr | Loading checkpoint shards:   0%|                                                                                                                               | 0/7 [00:00<?, ?it/s]
2024-07-04 14:01:37 | ERROR | stderr | Loading checkpoint shards:  14%|█████████████████                                                                                                      | 1/7 [00:00<00:03,  1.95it/s]
2024-07-04 14:01:38 | ERROR | stderr | Loading checkpoint shards:  29%|██████████████████████████████████                                                                                     | 2/7 [00:00<00:02,  2.05it/s]
2024-07-04 14:01:38 | ERROR | stderr | Loading checkpoint shards:  43%|███████████████████████████████████████████████████                                                                    | 3/7 [00:01<00:01,  2.13it/s]
2024-07-04 14:01:39 | ERROR | stderr | Loading checkpoint shards:  57%|████████████████████████████████████████████████████████████████████                                                   | 4/7 [00:01<00:01,  2.18it/s]
2024-07-04 14:01:39 | ERROR | stderr | Loading checkpoint shards:  71%|█████████████████████████████████████████████████████████████████████████████████████                                  | 5/7 [00:02<00:00,  2.19it/s]
2024-07-04 14:01:40 | ERROR | stderr | Loading checkpoint shards:  86%|██████████████████████████████████████████████████████████████████████████████████████████████████████                 | 6/7 [00:02<00:00,  2.19it/s]
2024-07-04 14:01:40 | ERROR | stderr | Loading checkpoint shards: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 7/7 [00:03<00:00,  2.33it/s]
2024-07-04 14:01:40 | ERROR | stderr | Loading checkpoint shards: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 7/7 [00:03<00:00,  2.22it/s]
2024-07-04 14:01:40 | ERROR | stderr | 
2024-07-04 14:01:47 | INFO | controller | Register a new worker: http://192.168.110.131:20002
2024-07-04 14:01:47 | INFO | controller | Register done: http://192.168.110.131:20002, {'model_names': ['chatglm3-6b'], 'speed': 1, 'queue_length': 0}
2024-07-04 14:01:47 | INFO | stdout | [32mINFO[0m:     192.168.110.131:54722 - "[1mPOST /register_worker HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:01:47 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1400057[0m]
2024-07-04 14:01:47 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:01:47 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:01:47 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:20002[0m (Press CTRL+C to quit)
2024-07-04 14:01:56 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1400840[0m]
2024-07-04 14:01:56 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:01:56 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:01:56 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:8000[0m (Press CTRL+C to quit)
2024-07-04 14:02:20 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:02:20 | INFO | stdout | [32mINFO[0m:     192.168.110.131:38372 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:02:32 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:02:32 | INFO | stdout | [32mINFO[0m:     192.168.110.131:55072 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:02:35 | INFO | stdout | [32mINFO[0m:     192.168.110.91:50763 - "[1mPOST /api/chat/search_engine_chat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:02:38 | INFO | stdout | 连接错误 https://zh.wikipedia.org/zh-hans/%E4%BF%9D%E7%BD%97%C2%B7%E4%B9%94%E6%B2%BB: Connection timeout to host https://zh.wikipedia.org/zh-hans/%E4%BF%9D%E7%BD%97%C2%B7%E4%B9%94%E6%B2%BB
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | uuid: df3f2581a7637611238ff1a0bc42c1a3
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | title: 保罗乔治去过的球队- 百度
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | snippet: 简介： 保罗乔治想加盟湖人大牛哥体育湖人和快船都是在洛杉矶保罗乔治换个球队却不用搬家他想联手詹姆斯冲击总冠军保罗乔治目前是无冕之王让詹姆斯带他起飞吧大牛哥体育...
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | link: https://www.baidu.com/from=844b/ssid=0/s?word=%E4%BF%9D%E7%BD%97%E4%B9%94%E6%B2%BB%E5%8E%BB%E8%BF%87%E7%9A%84%E7%90%83%E9%98%9F&sa=re_dl_prs_34689_5&ms=1&rqid=9785930024878850355&rq=%E4%B9%94%E6%B2%BB%E4%BF%9D%E7%BD%97%E7%8E%B0%E5%9C%A8%E5%9C%A8%E5%93%AA%E4%B8%AA%E9%98%9F&rsf=1630008&asctag=98503
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | score: 0.09756097560975607
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | uuid: df3f2581a7637611238ff1a0bc42c1a3
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | title: 保罗乔治去过的球队- 百度
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | snippet: 简介： 保罗乔治想加盟湖人大牛哥体育湖人和快船都是在洛杉矶保罗乔治换个球队却不用搬家他想联手詹姆斯冲击总冠军保罗乔治目前是无冕之王让詹姆斯带他起飞吧大牛哥体育...
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | link: https://www.baidu.com/from=844b/ssid=0/s?word=%E4%BF%9D%E7%BD%97%E4%B9%94%E6%B2%BB%E5%8E%BB%E8%BF%87%E7%9A%84%E7%90%83%E9%98%9F&sa=re_dl_prs_34689_5&ms=1&rqid=9785930024878850355&rq=%E4%B9%94%E6%B2%BB%E4%BF%9D%E7%BD%97%E7%8E%B0%E5%9C%A8%E5%9C%A8%E5%93%AA%E4%B8%AA%E9%98%9F&rsf=1630008&asctag=98503
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | score: 0.09756097560975607
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | uuid: df3f2581a7637611238ff1a0bc42c1a3
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | title: 保罗乔治去过的球队- 百度
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | snippet: 简介： 保罗乔治想加盟湖人大牛哥体育湖人和快船都是在洛杉矶保罗乔治换个球队却不用搬家他想联手詹姆斯冲击总冠军保罗乔治目前是无冕之王让詹姆斯带他起飞吧大牛哥体育...
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | link: https://www.baidu.com/from=844b/ssid=0/s?word=%E4%BF%9D%E7%BD%97%E4%B9%94%E6%B2%BB%E5%8E%BB%E8%BF%87%E7%9A%84%E7%90%83%E9%98%9F&sa=re_dl_prs_34689_5&ms=1&rqid=9785930024878850355&rq=%E4%B9%94%E6%B2%BB%E4%BF%9D%E7%BD%97%E7%8E%B0%E5%9C%A8%E5%9C%A8%E5%93%AA%E4%B8%AA%E9%98%9F&rsf=1630008&asctag=98503
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | score: 0.09756097560975607
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | uuid: df3f2581a7637611238ff1a0bc42c1a3
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | title: 保罗乔治去过的球队- 百度
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | snippet: 简介： 保罗乔治想加盟湖人大牛哥体育湖人和快船都是在洛杉矶保罗乔治换个球队却不用搬家他想联手詹姆斯冲击总冠军保罗乔治目前是无冕之王让詹姆斯带他起飞吧大牛哥体育...
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | link: https://www.baidu.com/from=844b/ssid=0/s?word=%E4%BF%9D%E7%BD%97%E4%B9%94%E6%B2%BB%E5%8E%BB%E8%BF%87%E7%9A%84%E7%90%83%E9%98%9F&sa=re_dl_prs_34689_5&ms=1&rqid=9785930024878850355&rq=%E4%B9%94%E6%B2%BB%E4%BF%9D%E7%BD%97%E7%8E%B0%E5%9C%A8%E5%9C%A8%E5%93%AA%E4%B8%AA%E9%98%9F&rsf=1630008&asctag=98503
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | score: 0.09756097560975607
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | uuid: df3f2581a7637611238ff1a0bc42c1a3
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | title: 保罗乔治去过的球队- 百度
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | snippet: 简介： 保罗乔治想加盟湖人大牛哥体育湖人和快船都是在洛杉矶保罗乔治换个球队却不用搬家他想联手詹姆斯冲击总冠军保罗乔治目前是无冕之王让詹姆斯带他起飞吧大牛哥体育...
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | link: https://www.baidu.com/from=844b/ssid=0/s?word=%E4%BF%9D%E7%BD%97%E4%B9%94%E6%B2%BB%E5%8E%BB%E8%BF%87%E7%9A%84%E7%90%83%E9%98%9F&sa=re_dl_prs_34689_5&ms=1&rqid=9785930024878850355&rq=%E4%B9%94%E6%B2%BB%E4%BF%9D%E7%BD%97%E7%8E%B0%E5%9C%A8%E5%9C%A8%E5%93%AA%E4%B8%AA%E9%98%9F&rsf=1630008&asctag=98503
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | score: 0.09756097560975607
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | uuid: 52d550aa66c3dbff6160130f044c585d
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | title: 保罗-乔治确认离队，将加盟费城76人队摆脱“养生篮球” - 手机搜狐
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | snippet: 尽管乔治的下一站尚未正式确定，但迹象表明，费城76人队在这场“泡脚追逐战”中领先于其他球队。 ... 支球队签约。”这一决定意味着乔治在快船六年的 ...
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | link: https://m.sohu.com/a/790010663_121159133
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | score: 0.051948051948051965
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | uuid: 52d550aa66c3dbff6160130f044c585d
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | title: 保罗-乔治确认离队，将加盟费城76人队摆脱“养生篮球” - 手机搜狐
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | snippet: 尽管乔治的下一站尚未正式确定，但迹象表明，费城76人队在这场“泡脚追逐战”中领先于其他球队。 ... 支球队签约。”这一决定意味着乔治在快船六年的 ...
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | link: https://m.sohu.com/a/790010663_121159133
2024-07-04 14:02:38 | INFO | stdout | 我开始打印 k 和 v！！！！！！！！！！！！！！！！！！！！！！！！！！！！
2024-07-04 14:02:38 | INFO | stdout | score: 0.051948051948051965
2024-07-04 14:02:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:45192 - "[1mPOST /list_models HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:02:48 | INFO | controller | names: ['http://192.168.110.131:20002'], queue_lens: [0.0], ret: http://192.168.110.131:20002
2024-07-04 14:02:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:45204 - "[1mPOST /get_worker_address HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:02:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:42762 - "[1mPOST /worker_get_conv_template HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:02:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:42778 - "[1mPOST /model_details HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:02:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:42786 - "[1mPOST /count_token HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:02:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:48860 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:02:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:42790 - "[1mPOST /worker_generate_stream HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:03:05 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:03:05 | INFO | stdout | [32mINFO[0m:     192.168.110.131:56248 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:03:17 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:03:17 | INFO | stdout | [32mINFO[0m:     192.168.110.131:56816 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:03:35 | WARNING | controller | Sending SIGKILL to {'zhipu-api': <Process name='api_worker - zhipu-api (1400058)' pid=1400058 parent=1399270 started daemon>}
2024-07-04 14:03:35 | WARNING | controller | Sending SIGKILL to {'chatglm3-6b': <Process name='model_worker - chatglm3-6b (1400057)' pid=1400057 parent=1399270 started daemon>}
2024-07-04 14:03:35 | WARNING | controller | Sending SIGKILL to <Process name='controller (1399803)' pid=1399803 parent=1399270 started daemon>
2024-07-04 14:03:35 | WARNING | controller | Sending SIGKILL to <Process name='openai_api (1400056)' pid=1400056 parent=1399270 started daemon>
2024-07-04 14:03:35 | WARNING | controller | Sending SIGKILL to <Process name='API Server (1400840)' pid=1400840 parent=1399270 started daemon>
2024-07-04 14:03:35 | INFO | controller | Process status: {'zhipu-api': <Process name='api_worker - zhipu-api (1400058)' pid=1400058 parent=1399270 started daemon>}
2024-07-04 14:03:35 | INFO | controller | Process status: {'chatglm3-6b': <Process name='model_worker - chatglm3-6b (1400057)' pid=1400057 parent=1399270 started daemon>}
2024-07-04 14:03:35 | INFO | controller | Process status: <Process name='controller (1399803)' pid=1399803 parent=1399270 started daemon>
2024-07-04 14:03:35 | INFO | controller | Process status: <Process name='openai_api (1400056)' pid=1400056 parent=1399270 started daemon>
2024-07-04 14:03:35 | INFO | controller | Process status: <Process name='API Server (1400840)' pid=1400840 parent=1399270 started daemon>
2024-07-04 14:03:35 | ERROR | stderr | Traceback (most recent call last):
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 584, in <module>
2024-07-04 14:03:35 | ERROR | stderr |     loop.run_until_complete(start_main_server())
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 495, in start_main_server
2024-07-04 14:03:35 | ERROR | stderr |     cmd = queue.get()
2024-07-04 14:03:35 | ERROR | stderr |   File "<string>", line 2, in get
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/managers.py", line 818, in _callmethod
2024-07-04 14:03:35 | ERROR | stderr |     kind, result = conn.recv()
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 255, in recv
2024-07-04 14:03:35 | ERROR | stderr |     buf = self._recv_bytes()
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 419, in _recv_bytes
2024-07-04 14:03:35 | ERROR | stderr |     buf = self._recv(4)
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 384, in _recv
2024-07-04 14:03:35 | ERROR | stderr |     chunk = read(handle, remaining)
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 368, in f
2024-07-04 14:03:35 | ERROR | stderr |     raise KeyboardInterrupt(f"{signalname} received")
2024-07-04 14:03:35 | ERROR | stderr | KeyboardInterrupt: SIGINT received
2024-07-04 14:03:35 | ERROR | stderr | Exception ignored in atexit callback: <function _exit_function at 0x7f93ab0b00d0>
2024-07-04 14:03:35 | ERROR | stderr | Traceback (most recent call last):
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/util.py", line 334, in _exit_function
2024-07-04 14:03:35 | ERROR | stderr |     _run_finalizers(0)
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/util.py", line 300, in _run_finalizers
2024-07-04 14:03:35 | ERROR | stderr |     finalizer()
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/util.py", line 224, in __call__
2024-07-04 14:03:35 | ERROR | stderr |     res = self._callback(*self._args, **self._kwargs)
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/managers.py", line 674, in _finalize_manager
2024-07-04 14:03:35 | ERROR | stderr |     process.join(timeout=1.0)
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/process.py", line 149, in join
2024-07-04 14:03:35 | ERROR | stderr |     res = self._popen.wait(timeout)
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/popen_fork.py", line 40, in wait
2024-07-04 14:03:35 | ERROR | stderr |     if not wait([self.sentinel], timeout):
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 936, in wait
2024-07-04 14:03:35 | ERROR | stderr |     ready = selector.select(timeout)
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/selectors.py", line 416, in select
2024-07-04 14:03:35 | ERROR | stderr |     fd_event_list = self._selector.poll(timeout)
2024-07-04 14:03:35 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 368, in f
2024-07-04 14:03:35 | ERROR | stderr |     raise KeyboardInterrupt(f"{signalname} received")
2024-07-04 14:03:35 | ERROR | stderr | KeyboardInterrupt: SIGINT received
2024-07-04 14:03:56 | INFO | controller | 正在启动服务：
2024-07-04 14:03:56 | INFO | controller | 如需查看 服务日志 日志，请前往 /home/00_rag/fufan-chat-api/logs
2024-07-04 14:04:04 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1403398[0m]
2024-07-04 14:04:04 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:04:04 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:04:04 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:20001[0m (Press CTRL+C to quit)
2024-07-04 14:04:13 | INFO | controller | Register a new worker: http://192.168.110.131:21001
2024-07-04 14:04:13 | INFO | controller | Register done: http://192.168.110.131:21001, {'model_names': ['zhipu-api'], 'speed': 1, 'queue_length': 0}
2024-07-04 14:04:13 | INFO | stdout | [32mINFO[0m:     192.168.110.131:39148 - "[1mPOST /register_worker HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:14 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1403686[0m]
2024-07-04 14:04:14 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:04:14 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:04:14 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:20000[0m (Press CTRL+C to quit)
2024-07-04 14:04:15 | ERROR | stderr | Loading checkpoint shards:   0%|                                                                                                                               | 0/7 [00:00<?, ?it/s]
2024-07-04 14:04:16 | ERROR | stderr | Loading checkpoint shards:  14%|█████████████████                                                                                                      | 1/7 [00:00<00:03,  1.85it/s]
2024-07-04 14:04:16 | ERROR | stderr | Loading checkpoint shards:  29%|██████████████████████████████████                                                                                     | 2/7 [00:01<00:02,  2.00it/s]
2024-07-04 14:04:17 | ERROR | stderr | Loading checkpoint shards:  43%|███████████████████████████████████████████████████                                                                    | 3/7 [00:01<00:01,  2.10it/s]
2024-07-04 14:04:18 | ERROR | stderr | Loading checkpoint shards:  57%|████████████████████████████████████████████████████████████████████                                                   | 4/7 [00:02<00:01,  1.91it/s]
2024-07-04 14:04:18 | ERROR | stderr | Loading checkpoint shards:  71%|█████████████████████████████████████████████████████████████████████████████████████                                  | 5/7 [00:02<00:01,  1.95it/s]
2024-07-04 14:04:18 | ERROR | stderr | Loading checkpoint shards:  86%|██████████████████████████████████████████████████████████████████████████████████████████████████████                 | 6/7 [00:03<00:00,  2.03it/s]
2024-07-04 14:04:19 | ERROR | stderr | Loading checkpoint shards: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 7/7 [00:03<00:00,  2.23it/s]
2024-07-04 14:04:19 | ERROR | stderr | Loading checkpoint shards: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 7/7 [00:03<00:00,  2.08it/s]
2024-07-04 14:04:19 | ERROR | stderr | 
2024-07-04 14:04:28 | INFO | controller | Register a new worker: http://192.168.110.131:20002
2024-07-04 14:04:28 | INFO | controller | Register done: http://192.168.110.131:20002, {'model_names': ['chatglm3-6b'], 'speed': 1, 'queue_length': 0}
2024-07-04 14:04:28 | INFO | stdout | [32mINFO[0m:     192.168.110.131:34406 - "[1mPOST /register_worker HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:28 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1403687[0m]
2024-07-04 14:04:28 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:04:28 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:04:28 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:20002[0m (Press CTRL+C to quit)
2024-07-04 14:04:37 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1404682[0m]
2024-07-04 14:04:37 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:04:37 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:04:37 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:8000[0m (Press CTRL+C to quit)
2024-07-04 14:04:39 | INFO | stdout | [32mINFO[0m:     192.168.110.91:51368 - "[1mPOST /api/chat/search_engine_chat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:42 | INFO | stdout | 连接错误 https://zh.wikipedia.org/zh-hans/%E4%BF%9D%E7%BD%97%C2%B7%E4%B9%94%E6%B2%BB: Connection timeout to host https://zh.wikipedia.org/zh-hans/%E4%BF%9D%E7%BD%97%C2%B7%E4%B9%94%E6%B2%BB
2024-07-04 14:04:49 | INFO | stdout | [32mINFO[0m:     192.168.110.131:41922 - "[1mPOST /list_models HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:49 | INFO | controller | names: ['http://192.168.110.131:20002'], queue_lens: [0.0], ret: http://192.168.110.131:20002
2024-07-04 14:04:49 | INFO | stdout | [32mINFO[0m:     192.168.110.131:41928 - "[1mPOST /get_worker_address HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:49 | INFO | stdout | [32mINFO[0m:     192.168.110.131:55516 - "[1mPOST /worker_get_conv_template HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:49 | INFO | stdout | [32mINFO[0m:     192.168.110.131:55522 - "[1mPOST /model_details HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:49 | INFO | stdout | [32mINFO[0m:     192.168.110.131:55528 - "[1mPOST /count_token HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:49 | INFO | stdout | [32mINFO[0m:     192.168.110.131:34198 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:49 | INFO | stdout | [32mINFO[0m:     192.168.110.131:55532 - "[1mPOST /worker_generate_stream HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:04:58 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:04:58 | INFO | stdout | [32mINFO[0m:     192.168.110.131:39644 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:05:13 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:05:13 | INFO | stdout | [32mINFO[0m:     192.168.110.131:34008 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:05:44 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:05:44 | INFO | stdout | [32mINFO[0m:     192.168.110.131:44548 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:05:58 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:05:58 | INFO | stdout | [32mINFO[0m:     192.168.110.131:51078 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:06:29 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:06:29 | INFO | stdout | [32mINFO[0m:     192.168.110.131:33962 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:06:43 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:06:43 | INFO | stdout | [32mINFO[0m:     192.168.110.131:38034 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:07:14 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:07:14 | INFO | stdout | [32mINFO[0m:     192.168.110.131:33908 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:07:28 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:07:28 | INFO | stdout | [32mINFO[0m:     192.168.110.131:48336 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:07:59 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:07:59 | INFO | stdout | [32mINFO[0m:     192.168.110.131:60252 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:13 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:08:13 | INFO | stdout | [32mINFO[0m:     192.168.110.131:42890 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:17 | INFO | stdout | [32mINFO[0m:     192.168.110.91:51578 - "[1mPOST /api/chat/search_engine_chat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:20 | INFO | stdout | 连接错误 https://zh.wikipedia.org/zh-hans/%E4%BF%9D%E7%BD%97%C2%B7%E4%B9%94%E6%B2%BB: Connection timeout to host https://zh.wikipedia.org/zh-hans/%E4%BF%9D%E7%BD%97%C2%B7%E4%B9%94%E6%B2%BB
2024-07-04 14:08:21 | INFO | stdout | [32mINFO[0m:     192.168.110.131:57490 - "[1mPOST /list_models HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:21 | INFO | controller | names: ['http://192.168.110.131:20002'], queue_lens: [0.0], ret: http://192.168.110.131:20002
2024-07-04 14:08:21 | INFO | stdout | [32mINFO[0m:     192.168.110.131:57502 - "[1mPOST /get_worker_address HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:21 | INFO | stdout | [32mINFO[0m:     192.168.110.131:49750 - "[1mPOST /model_details HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:21 | INFO | stdout | [32mINFO[0m:     192.168.110.131:49766 - "[1mPOST /count_token HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:21 | INFO | stdout | [32mINFO[0m:     192.168.110.131:47974 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:21 | INFO | stdout | [32mINFO[0m:     192.168.110.131:49776 - "[1mPOST /worker_generate_stream HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:44 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:08:44 | INFO | stdout | [32mINFO[0m:     192.168.110.131:36260 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:08:58 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:08:58 | INFO | stdout | [32mINFO[0m:     192.168.110.131:40960 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:09:29 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:09:29 | INFO | stdout | [32mINFO[0m:     192.168.110.131:47378 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:09:43 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:09:43 | INFO | stdout | [32mINFO[0m:     192.168.110.131:43528 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:09:59 | WARNING | controller | Sending SIGKILL to {'zhipu-api': <Process name='api_worker - zhipu-api (1403688)' pid=1403688 parent=1402878 started daemon>}
2024-07-04 14:09:59 | WARNING | controller | Sending SIGKILL to {'chatglm3-6b': <Process name='model_worker - chatglm3-6b (1403687)' pid=1403687 parent=1402878 started daemon>}
2024-07-04 14:09:59 | WARNING | controller | Sending SIGKILL to <Process name='controller (1403398)' pid=1403398 parent=1402878 started daemon>
2024-07-04 14:09:59 | WARNING | controller | Sending SIGKILL to <Process name='openai_api (1403686)' pid=1403686 parent=1402878 started daemon>
2024-07-04 14:09:59 | ERROR | stderr | [32mINFO[0m:     Shutting down
2024-07-04 14:09:59 | WARNING | controller | Sending SIGKILL to <Process name='API Server (1404682)' pid=1404682 parent=1402878 started daemon>
2024-07-04 14:09:59 | INFO | controller | Process status: {'zhipu-api': <Process name='api_worker - zhipu-api (1403688)' pid=1403688 parent=1402878 started daemon>}
2024-07-04 14:09:59 | INFO | controller | Process status: {'chatglm3-6b': <Process name='model_worker - chatglm3-6b (1403687)' pid=1403687 parent=1402878 started daemon>}
2024-07-04 14:09:59 | INFO | controller | Process status: <Process name='controller (1403398)' pid=1403398 parent=1402878 started daemon>
2024-07-04 14:09:59 | INFO | controller | Process status: <Process name='openai_api (1403686)' pid=1403686 parent=1402878 started daemon>
2024-07-04 14:09:59 | INFO | controller | Process status: <Process name='API Server (1404682)' pid=1404682 parent=1402878 started daemon>
2024-07-04 14:09:59 | ERROR | stderr | Traceback (most recent call last):
2024-07-04 14:09:59 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 584, in <module>
2024-07-04 14:09:59 | ERROR | stderr |     loop.run_until_complete(start_main_server())
2024-07-04 14:09:59 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 495, in start_main_server
2024-07-04 14:09:59 | ERROR | stderr |     cmd = queue.get()
2024-07-04 14:09:59 | ERROR | stderr |   File "<string>", line 2, in get
2024-07-04 14:09:59 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/managers.py", line 818, in _callmethod
2024-07-04 14:09:59 | ERROR | stderr |     kind, result = conn.recv()
2024-07-04 14:09:59 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 255, in recv
2024-07-04 14:09:59 | ERROR | stderr |     buf = self._recv_bytes()
2024-07-04 14:09:59 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 419, in _recv_bytes
2024-07-04 14:09:59 | ERROR | stderr |     buf = self._recv(4)
2024-07-04 14:09:59 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 384, in _recv
2024-07-04 14:09:59 | ERROR | stderr |     chunk = read(handle, remaining)
2024-07-04 14:09:59 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 368, in f
2024-07-04 14:09:59 | ERROR | stderr |     raise KeyboardInterrupt(f"{signalname} received")
2024-07-04 14:09:59 | ERROR | stderr | KeyboardInterrupt: SIGINT received
2024-07-04 14:10:00 | ERROR | stderr | Exception ignored in atexit callback: <function _exit_function at 0x7ff0501880d0>
2024-07-04 14:10:00 | ERROR | stderr | Traceback (most recent call last):
2024-07-04 14:10:00 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/util.py", line 334, in _exit_function
2024-07-04 14:10:00 | ERROR | stderr |     _run_finalizers(0)
2024-07-04 14:10:00 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/util.py", line 300, in _run_finalizers
2024-07-04 14:10:00 | ERROR | stderr |     finalizer()
2024-07-04 14:10:00 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/util.py", line 224, in __call__
2024-07-04 14:10:00 | ERROR | stderr |     res = self._callback(*self._args, **self._kwargs)
2024-07-04 14:10:00 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/managers.py", line 674, in _finalize_manager
2024-07-04 14:10:00 | ERROR | stderr |     process.join(timeout=1.0)
2024-07-04 14:10:00 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/process.py", line 149, in join
2024-07-04 14:10:00 | ERROR | stderr |     res = self._popen.wait(timeout)
2024-07-04 14:10:00 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/popen_fork.py", line 40, in wait
2024-07-04 14:10:00 | ERROR | stderr |     if not wait([self.sentinel], timeout):
2024-07-04 14:10:00 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 936, in wait
2024-07-04 14:10:00 | ERROR | stderr |     ready = selector.select(timeout)
2024-07-04 14:10:00 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/selectors.py", line 416, in select
2024-07-04 14:10:00 | ERROR | stderr |     fd_event_list = self._selector.poll(timeout)
2024-07-04 14:10:00 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 368, in f
2024-07-04 14:10:00 | ERROR | stderr |     raise KeyboardInterrupt(f"{signalname} received")
2024-07-04 14:10:00 | ERROR | stderr | KeyboardInterrupt: SIGINT received
2024-07-04 14:15:49 | INFO | controller | 正在启动服务：
2024-07-04 14:15:49 | INFO | controller | 如需查看 服务日志 日志，请前往 /home/00_rag/fufan-chat-api/logs
2024-07-04 14:15:58 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1416540[0m]
2024-07-04 14:15:58 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:15:58 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:15:58 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:20001[0m (Press CTRL+C to quit)
2024-07-04 14:16:07 | INFO | controller | Register a new worker: http://192.168.110.131:21001
2024-07-04 14:16:07 | INFO | controller | Register done: http://192.168.110.131:21001, {'model_names': ['zhipu-api'], 'speed': 1, 'queue_length': 0}
2024-07-04 14:16:07 | INFO | stdout | [32mINFO[0m:     192.168.110.131:43922 - "[1mPOST /register_worker HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:07 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1416758[0m]
2024-07-04 14:16:07 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:16:07 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:16:07 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:20000[0m (Press CTRL+C to quit)
2024-07-04 14:16:09 | ERROR | stderr | Loading checkpoint shards:   0%|                                                                                                                               | 0/7 [00:00<?, ?it/s]
2024-07-04 14:16:10 | ERROR | stderr | Loading checkpoint shards:  14%|█████████████████                                                                                                      | 1/7 [00:00<00:03,  1.76it/s]
2024-07-04 14:16:10 | ERROR | stderr | Loading checkpoint shards:  29%|██████████████████████████████████                                                                                     | 2/7 [00:01<00:02,  2.03it/s]
2024-07-04 14:16:11 | ERROR | stderr | Loading checkpoint shards:  43%|███████████████████████████████████████████████████                                                                    | 3/7 [00:01<00:01,  2.10it/s]
2024-07-04 14:16:11 | ERROR | stderr | Loading checkpoint shards:  57%|████████████████████████████████████████████████████████████████████                                                   | 4/7 [00:01<00:01,  2.16it/s]
2024-07-04 14:16:12 | ERROR | stderr | Loading checkpoint shards:  71%|█████████████████████████████████████████████████████████████████████████████████████                                  | 5/7 [00:02<00:00,  2.18it/s]
2024-07-04 14:16:12 | ERROR | stderr | Loading checkpoint shards:  86%|██████████████████████████████████████████████████████████████████████████████████████████████████████                 | 6/7 [00:02<00:00,  2.20it/s]
2024-07-04 14:16:12 | ERROR | stderr | Loading checkpoint shards: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 7/7 [00:03<00:00,  2.37it/s]
2024-07-04 14:16:12 | ERROR | stderr | Loading checkpoint shards: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 7/7 [00:03<00:00,  2.21it/s]
2024-07-04 14:16:12 | ERROR | stderr | 
2024-07-04 14:16:19 | INFO | controller | Register a new worker: http://192.168.110.131:20002
2024-07-04 14:16:19 | INFO | controller | Register done: http://192.168.110.131:20002, {'model_names': ['chatglm3-6b'], 'speed': 1, 'queue_length': 0}
2024-07-04 14:16:19 | INFO | stdout | [32mINFO[0m:     192.168.110.131:44478 - "[1mPOST /register_worker HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:19 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1416759[0m]
2024-07-04 14:16:19 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:16:19 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:16:19 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:20002[0m (Press CTRL+C to quit)
2024-07-04 14:16:28 | ERROR | stderr | [32mINFO[0m:     Started server process [[36m1417611[0m]
2024-07-04 14:16:28 | ERROR | stderr | [32mINFO[0m:     Waiting for application startup.
2024-07-04 14:16:28 | ERROR | stderr | [32mINFO[0m:     Application startup complete.
2024-07-04 14:16:28 | ERROR | stderr | [32mINFO[0m:     Uvicorn running on [1mhttp://192.168.110.131:8000[0m (Press CTRL+C to quit)
2024-07-04 14:16:35 | INFO | stdout | [32mINFO[0m:     192.168.110.91:51971 - "[1mPOST /api/chat/search_engine_chat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:38 | INFO | stdout | 连接错误 https://zh.wikipedia.org/zh-hans/%E4%BF%9D%E7%BD%97%C2%B7%E4%B9%94%E6%B2%BB: Connection timeout to host https://zh.wikipedia.org/zh-hans/%E4%BF%9D%E7%BD%97%C2%B7%E4%B9%94%E6%B2%BB
2024-07-04 14:16:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:49520 - "[1mPOST /list_models HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:48 | INFO | controller | names: ['http://192.168.110.131:20002'], queue_lens: [0.0], ret: http://192.168.110.131:20002
2024-07-04 14:16:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:49534 - "[1mPOST /get_worker_address HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:57066 - "[1mPOST /worker_get_conv_template HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:57068 - "[1mPOST /model_details HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:57076 - "[1mPOST /count_token HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:54178 - "[1mPOST /v1/chat/completions HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:48 | INFO | stdout | [32mINFO[0m:     192.168.110.131:57080 - "[1mPOST /worker_generate_stream HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:16:52 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:16:52 | INFO | stdout | [32mINFO[0m:     192.168.110.131:49550 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:17:04 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:17:04 | INFO | stdout | [32mINFO[0m:     192.168.110.131:51050 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:17:37 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:17:37 | INFO | stdout | [32mINFO[0m:     192.168.110.131:51510 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:17:49 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:17:49 | INFO | stdout | [32mINFO[0m:     192.168.110.131:34474 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:18:22 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:18:22 | INFO | stdout | [32mINFO[0m:     192.168.110.131:47974 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:18:34 | INFO | controller | Receive heart beat. http://192.168.110.131:20002
2024-07-04 14:18:34 | INFO | stdout | [32mINFO[0m:     192.168.110.131:45522 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:19:07 | INFO | controller | Receive heart beat. http://192.168.110.131:21001
2024-07-04 14:19:07 | INFO | stdout | [32mINFO[0m:     192.168.110.131:41968 - "[1mPOST /receive_heart_beat HTTP/1.1[0m" [32m200 OK[0m
2024-07-04 14:19:12 | WARNING | controller | Sending SIGKILL to {'zhipu-api': <Process name='api_worker - zhipu-api (1416760)' pid=1416760 parent=1416048 started daemon>}
2024-07-04 14:19:12 | WARNING | controller | Sending SIGKILL to {'chatglm3-6b': <Process name='model_worker - chatglm3-6b (1416759)' pid=1416759 parent=1416048 started daemon>}
2024-07-04 14:19:12 | WARNING | controller | Sending SIGKILL to <Process name='controller (1416540)' pid=1416540 parent=1416048 started daemon>
2024-07-04 14:19:12 | WARNING | controller | Sending SIGKILL to <Process name='openai_api (1416758)' pid=1416758 parent=1416048 started daemon>
2024-07-04 14:19:12 | WARNING | controller | Sending SIGKILL to <Process name='API Server (1417611)' pid=1417611 parent=1416048 started daemon>
2024-07-04 14:19:12 | INFO | controller | Process status: {'zhipu-api': <Process name='api_worker - zhipu-api (1416760)' pid=1416760 parent=1416048 started daemon>}
2024-07-04 14:19:12 | INFO | controller | Process status: {'chatglm3-6b': <Process name='model_worker - chatglm3-6b (1416759)' pid=1416759 parent=1416048 started daemon>}
2024-07-04 14:19:12 | INFO | controller | Process status: <Process name='controller (1416540)' pid=1416540 parent=1416048 started daemon>
2024-07-04 14:19:12 | INFO | controller | Process status: <Process name='openai_api (1416758)' pid=1416758 parent=1416048 started daemon>
2024-07-04 14:19:12 | INFO | controller | Process status: <Process name='API Server (1417611)' pid=1417611 parent=1416048 started daemon>
2024-07-04 14:19:12 | ERROR | stderr | Traceback (most recent call last):
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 584, in <module>
2024-07-04 14:19:12 | ERROR | stderr |     loop.run_until_complete(start_main_server())
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 495, in start_main_server
2024-07-04 14:19:12 | ERROR | stderr |     cmd = queue.get()
2024-07-04 14:19:12 | ERROR | stderr |   File "<string>", line 2, in get
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/managers.py", line 818, in _callmethod
2024-07-04 14:19:12 | ERROR | stderr |     kind, result = conn.recv()
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 255, in recv
2024-07-04 14:19:12 | ERROR | stderr |     buf = self._recv_bytes()
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 419, in _recv_bytes
2024-07-04 14:19:12 | ERROR | stderr |     buf = self._recv(4)
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 384, in _recv
2024-07-04 14:19:12 | ERROR | stderr |     chunk = read(handle, remaining)
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 368, in f
2024-07-04 14:19:12 | ERROR | stderr |     raise KeyboardInterrupt(f"{signalname} received")
2024-07-04 14:19:12 | ERROR | stderr | KeyboardInterrupt: SIGINT received
2024-07-04 14:19:12 | ERROR | stderr | Exception ignored in atexit callback: <function _exit_function at 0x7f7213a800d0>
2024-07-04 14:19:12 | ERROR | stderr | Traceback (most recent call last):
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/util.py", line 334, in _exit_function
2024-07-04 14:19:12 | ERROR | stderr |     _run_finalizers(0)
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/util.py", line 300, in _run_finalizers
2024-07-04 14:19:12 | ERROR | stderr |     finalizer()
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/util.py", line 224, in __call__
2024-07-04 14:19:12 | ERROR | stderr |     res = self._callback(*self._args, **self._kwargs)
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/managers.py", line 674, in _finalize_manager
2024-07-04 14:19:12 | ERROR | stderr |     process.join(timeout=1.0)
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/process.py", line 149, in join
2024-07-04 14:19:12 | ERROR | stderr |     res = self._popen.wait(timeout)
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/popen_fork.py", line 40, in wait
2024-07-04 14:19:12 | ERROR | stderr |     if not wait([self.sentinel], timeout):
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/multiprocessing/connection.py", line 936, in wait
2024-07-04 14:19:12 | ERROR | stderr |     ready = selector.select(timeout)
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/util/anaconda3/envs/fufan_clean/lib/python3.10/selectors.py", line 416, in select
2024-07-04 14:19:12 | ERROR | stderr |     fd_event_list = self._selector.poll(timeout)
2024-07-04 14:19:12 | ERROR | stderr |   File "/home/00_rag/fufan-chat-api/startup.py", line 368, in f
2024-07-04 14:19:12 | ERROR | stderr |     raise KeyboardInterrupt(f"{signalname} received")
2024-07-04 14:19:12 | ERROR | stderr | KeyboardInterrupt: SIGINT received
