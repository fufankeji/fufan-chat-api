import{d as b,o as d,c as E,J as $,aM as N,r as v,aE as O,_ as U,ai as u,V as t,u as p,a as y,P as n,a9 as q,O as _,aI as J,aJ as K,T as f,a3 as V}from"./vue-39WfQX0x.js";import{_ as I,e as C}from"./index-DqMa_eN-.js";import{B as T,C as D,E as L}from"./element-jUUjv72Y.js";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang-ByF1e_CK.js";import"./vxe-DW97H3iJ.js";const j=N('<div class="hand-down-left" data-v-957a4d98></div><div class="hand-down-right" data-v-957a4d98></div><div class="hand-up-left" data-v-957a4d98></div><div class="hand-up-right" data-v-957a4d98></div><div class="close-eyes" data-v-957a4d98></div>',5),A=[j],G=b({__name:"Owl",props:{closeEyes:{type:Boolean}},setup(s){const m=s;return(g,w)=>(d(),E("div",{class:$(["owl",{"owl-password":m.closeEyes}])},A,2))}}),H=I(G,[["__scopeId","data-v-957a4d98"]]);function Q(){const s=v(!1);return{isFocus:s,handleBlur:()=>{s.value=!1},handleFocus:()=>{s.value=!0}}}const W=s=>(J("data-v-0a4c5a3a"),s=s(),K(),s),X={class:"login-container"},Y={class:"login-card"},Z=W(()=>y("div",{class:"title"},null,-1)),ee={class:"content"},se=b({__name:"index",setup(s){const m=O(),{isFocus:g,handleBlur:w,handleFocus:R}=Q(),h=v(null),o=v(!1),a=U({username:"",password:"",code:""}),l=v(!1),z={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,max:16,message:"长度在 8 到 16 个字符",trigger:"blur"}]},k=()=>{var r;(r=h.value)==null||r.validate((e,i)=>{e?(o.value=!0,C().login(a).then(()=>{m.push({path:"/"})}).catch(()=>{a.password=""}).finally(()=>{o.value=!1})):console.error("表单校验不通过",i)})},M=async()=>{var r;(r=h.value)==null||r.validate((e,i)=>{e?(o.value=!0,C().register(a).then(()=>{L({message:"注册成功！",type:"success"}),l.value=!1}).catch(()=>{a.password=""}).finally(()=>{o.value=!1})):(console.error("表单校验不通过",i),o.value=!1)})};return(r,e)=>{const i=u("el-input"),x=u("el-form-item"),F=u("el-button"),S=u("el-form"),B=u("el-link");return d(),E("div",X,[t(P,{class:"theme-switch"}),t(H,{"close-eyes":p(g)},null,8,["close-eyes"]),y("div",Y,[Z,y("div",ee,[t(S,{ref_key:"loginFormRef",ref:h,model:a,rules:z,onKeyup:q(k,["enter"])},{default:n(()=>[t(x,{prop:"username"},{default:n(()=>[t(i,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=c=>a.username=c),modelModifiers:{trim:!0},placeholder:"用户名",type:"text",tabindex:"1","prefix-icon":p(T),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),t(x,{prop:"password"},{default:n(()=>[t(i,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=c=>a.password=c),modelModifiers:{trim:!0},placeholder:"密码",type:"password",tabindex:"2","prefix-icon":p(D),size:"large","show-password":"",onBlur:p(w),onFocus:p(R)},null,8,["modelValue","prefix-icon","onBlur","onFocus"])]),_:1}),l.value?(d(),_(F,{key:0,loading:o.value,type:"primary",size:"large",onClick:V(M,["prevent"])},{default:n(()=>[f("注 册")]),_:1},8,["loading"])):(d(),_(F,{key:1,loading:o.value,type:"primary",size:"large",onClick:V(k,["prevent"])},{default:n(()=>[f("登 录")]),_:1},8,["loading"]))]),_:1},8,["model"]),l.value?(d(),_(B,{key:0,class:"register-link",onClick:e[2]||(e[2]=c=>l.value=!l.value)},{default:n(()=>[f("去登陆")]),_:1})):(d(),_(B,{key:1,class:"register-link",onClick:e[3]||(e[3]=c=>l.value=!l.value)},{default:n(()=>[f("去注册")]),_:1}))])])])}}}),re=I(se,[["__scopeId","data-v-0a4c5a3a"]]);export{re as default};
