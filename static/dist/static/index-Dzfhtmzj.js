import{aB as at,_ as ze,r as D,i as Te,G as Be,h as ge,A as Oe,k as I,d as P,o as f,c as $,U as B,u as d,ai as v,a as S,V as i,P as m,X as We,O as x,R as ie,aC as lt,S as R,aD as ue,aE as ye,a8 as j,a3 as pe,F as q,I as me,aa as rt,T as W,J as U,aF as Ue,w as ve,aG as ct,aH as qe,f as Xe,K as Ke,aI as be,aJ as we,s as it,a9 as fe,aK as ae,n as Ge,aL as ut,Q as te,W as ne}from"./vue-39WfQX0x.js";import{g as dt,S as je,D as Q,s as Re,a as ft,u as Ce,b as J,L as ee,_ as F,c as Je,r as pt,d as Se,e as Ye}from"./index-BmLxQ8AD.js";import{u as _t}from"./useWatermark-BrVapMp3.js";import{j as mt,k as vt,g as ht,l as gt,E as se,n as yt,o as bt,p as Ze,u as wt,r as Ct,q as St,t as kt,v as xt,w as Tt,x as $t,y as Et,z as Mt,A as Vt}from"./element-DGJpsW9c.js";import{_ as It}from"./index.vue_vue_type_script_setup_true_lang-Bn5J1bUk.js";import{u as Qe,a as et,c as Lt,b as At,d as Rt,e as Dt}from"./chatHistory-Ci_UoPxq.js";import"./vxe-D9hZiMRD.js";function Pt(o){o?Re(ft):Re(je)}const le=at("app",()=>{const o=ze({opened:dt()!==je,withoutAnimation:!1}),e=D(Q.Desktop);return Te(()=>o.opened,n=>Pt(n)),{device:e,sidebar:o,toggleSidebar:n=>{o.opened=!o.opened,o.withoutAnimation=n},closeSidebar:n=>{o.opened=!1,o.withoutAnimation=n},toggleDevice:n=>{e.value=n}}}),Ft=992,Nt=()=>{const o=le(),{listenerRouteChange:e}=Ce(),t=()=>document.body.getBoundingClientRect().width-1<Ft,l=()=>{if(!document.hidden){const a=t();o.toggleDevice(a?Q.Mobile:Q.Desktop),a&&o.closeSidebar(!0)}};e(()=>{o.device===Q.Mobile&&o.sidebar.opened&&o.closeSidebar(!1)}),Be(()=>{window.addEventListener("resize",l)}),ge(()=>{t()&&(o.toggleDevice(Q.Mobile),o.closeSidebar(!0))}),Oe(()=>{window.removeEventListener("resize",l)})},tt=le(),Ht=I(()=>tt.device===Q.Mobile),zt=I(()=>tt.device===Q.Desktop);function re(){return{isMobile:Ht,isDesktop:zt}}const de=J(),Bt=I(()=>de.layoutMode===ee.Chat),Ot=I(()=>de.layoutMode===ee.Left),Wt=I(()=>de.layoutMode===ee.Top),Ut=I(()=>de.layoutMode===ee.LeftTop),qt=o=>{de.layoutMode=o};function ce(){return{isChat:Bt,isLeft:Ot,isTop:Wt,isLeftTop:Ut,setLayoutMode:qt}}const Xt={class:"layout-footer"},Kt=P({__name:"index",setup(o){const e="Fufan Chat";return(t,l)=>(f(),$("footer",Xt,"MIT © 2024-PRESENT "+B(d(e)),1))}}),Gt=F(Kt,[["__scopeId","data-v-727b748b"]]),jt={class:"app-main"},Jt={class:"app-scrollbar"},Yt=P({__name:"AppMain",setup(o){const e=Je(),t=J();return(l,a)=>{const n=v("router-view"),s=v("el-backtop");return f(),$("section",jt,[S("div",Jt,[i(n,null,{default:m(({Component:r,route:c})=>[i(We,{name:"el-fade-in",mode:"out-in"},{default:m(()=>[(f(),x(lt,{include:d(e).cachedViews},[(f(),x(ie(r),{key:c.path,class:"app-container-grow"}))],1032,["include"]))]),_:2},1024)]),_:1}),d(t).showFooter?(f(),x(Gt,{key:0})):R("",!0)]),i(s),i(s,{target:".app-scrollbar"})])}}}),$e=F(Yt,[["__scopeId","data-v-2efaa580"]]),Zt=P({__name:"index",props:{isActive:{type:Boolean,default:!1}},emits:["toggleClick"],setup(o,{emit:e}){const t=o,l=e,a=()=>{l("toggleClick")};return(n,s)=>{const r=v("el-icon");return f(),$("div",{onClick:a},[i(r,{size:20,class:"icon"},{default:m(()=>[t.isActive?(f(),x(d(mt),{key:0})):(f(),x(d(vt),{key:1}))]),_:1})])}}}),Qt=F(Zt,[["__scopeId","data-v-f3ab76f7"]]);function en(o){for(var e=[],t=0;t<o.length;){var l=o[t];if(l==="*"||l==="+"||l==="?"){e.push({type:"MODIFIER",index:t,value:o[t++]});continue}if(l==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:o[t++]});continue}if(l==="{"){e.push({type:"OPEN",index:t,value:o[t++]});continue}if(l==="}"){e.push({type:"CLOSE",index:t,value:o[t++]});continue}if(l===":"){for(var a="",n=t+1;n<o.length;){var s=o.charCodeAt(n);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){a+=o[n++];continue}break}if(!a)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:a}),t=n;continue}if(l==="("){var r=1,c="",n=t+1;if(o[n]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(n));for(;n<o.length;){if(o[n]==="\\"){c+=o[n++]+o[n++];continue}if(o[n]===")"){if(r--,r===0){n++;break}}else if(o[n]==="("&&(r++,o[n+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(n));c+=o[n++]}if(r)throw new TypeError("Unbalanced pattern at ".concat(t));if(!c)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:c}),t=n;continue}e.push({type:"CHAR",index:t,value:o[t++]})}return e.push({type:"END",index:t,value:""}),e}function tn(o,e){e===void 0&&(e={});for(var t=en(o),l=e.prefixes,a=l===void 0?"./":l,n="[^".concat(sn(e.delimiter||"/#?"),"]+?"),s=[],r=0,c=0,_="",p=function(w){if(c<t.length&&t[c].type===w)return t[c++].value},u=function(w){var T=p(w);if(T!==void 0)return T;var A=t[c],k=A.type,L=A.index;throw new TypeError("Unexpected ".concat(k," at ").concat(L,", expected ").concat(w))},b=function(){for(var w="",T;T=p("CHAR")||p("ESCAPED_CHAR");)w+=T;return w};c<t.length;){var h=p("CHAR"),g=p("NAME"),C=p("PATTERN");if(g||C){var y=h||"";a.indexOf(y)===-1&&(_+=y,y=""),_&&(s.push(_),_=""),s.push({name:g||r++,prefix:y,suffix:"",pattern:C||n,modifier:p("MODIFIER")||""});continue}var E=h||p("ESCAPED_CHAR");if(E){_+=E;continue}_&&(s.push(_),_="");var H=p("OPEN");if(H){var y=b(),z=p("NAME")||"",N=p("PATTERN")||"",M=b();u("CLOSE"),s.push({name:z||(N?r++:""),pattern:z&&!N?n:N,prefix:y,suffix:M,modifier:p("MODIFIER")||""});continue}u("END")}return s}function nn(o,e){return on(tn(o,e),e)}function on(o,e){e===void 0&&(e={});var t=an(e),l=e.encode,a=l===void 0?function(c){return c}:l,n=e.validate,s=n===void 0?!0:n,r=o.map(function(c){if(typeof c=="object")return new RegExp("^(?:".concat(c.pattern,")$"),t)});return function(c){for(var _="",p=0;p<o.length;p++){var u=o[p];if(typeof u=="string"){_+=u;continue}var b=c?c[u.name]:void 0,h=u.modifier==="?"||u.modifier==="*",g=u.modifier==="*"||u.modifier==="+";if(Array.isArray(b)){if(!g)throw new TypeError('Expected "'.concat(u.name,'" to not repeat, but got an array'));if(b.length===0){if(h)continue;throw new TypeError('Expected "'.concat(u.name,'" to not be empty'))}for(var C=0;C<b.length;C++){var y=a(b[C],u);if(s&&!r[p].test(y))throw new TypeError('Expected all "'.concat(u.name,'" to match "').concat(u.pattern,'", but got "').concat(y,'"'));_+=u.prefix+y+u.suffix}continue}if(typeof b=="string"||typeof b=="number"){var y=a(String(b),u);if(s&&!r[p].test(y))throw new TypeError('Expected "'.concat(u.name,'" to match "').concat(u.pattern,'", but got "').concat(y,'"'));_+=u.prefix+y+u.suffix;continue}if(!h){var E=g?"an array":"a string";throw new TypeError('Expected "'.concat(u.name,'" to be ').concat(E))}}return _}}function sn(o){return o.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function an(o){return o&&o.sensitive?"":"i"}const ln={key:0,class:"no-redirect"},rn=["onClick"],cn=P({__name:"index",setup(o){const e=ue(),t=ye(),{listenerRouteChange:l}=Ce(),a=D([]),n=()=>{a.value=e.matched.filter(c=>{var _,p;return((_=c.meta)==null?void 0:_.title)&&((p=c.meta)==null?void 0:p.breadcrumb)!==!1})},s=c=>nn(c)(e.params),r=c=>{const{redirect:_,path:p}=c;if(_){t.push(_);return}t.push(s(p))};return l(c=>{c.path.startsWith("/redirect/")||n()},!0),(c,_)=>{const p=v("el-breadcrumb-item"),u=v("el-breadcrumb");return f(),x(u,null,{default:m(()=>[(f(!0),$(q,null,j(a.value,(b,h)=>(f(),x(p,{key:b.path},{default:m(()=>[b.redirect==="noRedirect"||h===a.value.length-1?(f(),$("span",ln,B(b.meta.title),1)):(f(),$("a",{key:1,onClick:pe(g=>r(b),["prevent"])},B(b.meta.title),9,rn))]),_:2},1024))),128))]),_:1})}}}),un=F(cn,[["__scopeId","data-v-616d4c33"]]),he=o=>/^(https?:|mailto:|tel:)/.test(o),dn=["href"],fn=P({__name:"SidebarItemLink",props:{to:{}},setup(o){const e=o;return(t,l)=>{const a=v("router-link");return d(he)(e.to)?(f(),$("a",{key:0,href:e.to,target:"_blank",rel:"noopener"},[me(t.$slots,"default")],8,dn)):(f(),x(a,{key:1,to:e.to},{default:m(()=>[me(t.$slots,"default")]),_:3},8,["to"]))}}});function G(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function De(o,e){for(var t="",l=0,a=-1,n=0,s,r=0;r<=o.length;++r){if(r<o.length)s=o.charCodeAt(r);else{if(s===47)break;s=47}if(s===47){if(!(a===r-1||n===1))if(a!==r-1&&n===2){if(t.length<2||l!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var c=t.lastIndexOf("/");if(c!==t.length-1){c===-1?(t="",l=0):(t=t.slice(0,c),l=t.length-1-t.lastIndexOf("/")),a=r,n=0;continue}}else if(t.length===2||t.length===1){t="",l=0,a=r,n=0;continue}}e&&(t.length>0?t+="/..":t="..",l=2)}else t.length>0?t+="/"+o.slice(a+1,r):t=o.slice(a+1,r),l=r-a-1;a=r,n=0}else s===46&&n!==-1?++n:n=-1}return t}function pn(o,e){var t=e.dir||e.root,l=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+l:t+o+l:l}var oe={resolve:function(){for(var e="",t=!1,l,a=arguments.length-1;a>=-1&&!t;a--){var n;a>=0?n=arguments[a]:(l===void 0&&(l=process.cwd()),n=l),G(n),n.length!==0&&(e=n+"/"+e,t=n.charCodeAt(0)===47)}return e=De(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(G(e),e.length===0)return".";var t=e.charCodeAt(0)===47,l=e.charCodeAt(e.length-1)===47;return e=De(e,!t),e.length===0&&!t&&(e="."),e.length>0&&l&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return G(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var l=arguments[t];G(l),l.length>0&&(e===void 0?e=l:e+="/"+l)}return e===void 0?".":oe.normalize(e)},relative:function(e,t){if(G(e),G(t),e===t||(e=oe.resolve(e),t=oe.resolve(t),e===t))return"";for(var l=1;l<e.length&&e.charCodeAt(l)===47;++l);for(var a=e.length,n=a-l,s=1;s<t.length&&t.charCodeAt(s)===47;++s);for(var r=t.length,c=r-s,_=n<c?n:c,p=-1,u=0;u<=_;++u){if(u===_){if(c>_){if(t.charCodeAt(s+u)===47)return t.slice(s+u+1);if(u===0)return t.slice(s+u)}else n>_&&(e.charCodeAt(l+u)===47?p=u:u===0&&(p=0));break}var b=e.charCodeAt(l+u),h=t.charCodeAt(s+u);if(b!==h)break;b===47&&(p=u)}var g="";for(u=l+p+1;u<=a;++u)(u===a||e.charCodeAt(u)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+t.slice(s+p):(s+=p,t.charCodeAt(s)===47&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(G(e),e.length===0)return".";for(var t=e.charCodeAt(0),l=t===47,a=-1,n=!0,s=e.length-1;s>=1;--s)if(t=e.charCodeAt(s),t===47){if(!n){a=s;break}}else n=!1;return a===-1?l?"/":".":l&&a===1?"//":e.slice(0,a)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');G(e);var l=0,a=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var r=t.length-1,c=-1;for(s=e.length-1;s>=0;--s){var _=e.charCodeAt(s);if(_===47){if(!n){l=s+1;break}}else c===-1&&(n=!1,c=s+1),r>=0&&(_===t.charCodeAt(r)?--r===-1&&(a=s):(r=-1,a=c))}return l===a?a=c:a===-1&&(a=e.length),e.slice(l,a)}else{for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!n){l=s+1;break}}else a===-1&&(n=!1,a=s+1);return a===-1?"":e.slice(l,a)}},extname:function(e){G(e);for(var t=-1,l=0,a=-1,n=!0,s=0,r=e.length-1;r>=0;--r){var c=e.charCodeAt(r);if(c===47){if(!n){l=r+1;break}continue}a===-1&&(n=!1,a=r+1),c===46?t===-1?t=r:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||a===-1||s===0||s===1&&t===a-1&&t===l+1?"":e.slice(t,a)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return pn("/",e)},parse:function(e){G(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var l=e.charCodeAt(0),a=l===47,n;a?(t.root="/",n=1):n=0;for(var s=-1,r=0,c=-1,_=!0,p=e.length-1,u=0;p>=n;--p){if(l=e.charCodeAt(p),l===47){if(!_){r=p+1;break}continue}c===-1&&(_=!1,c=p+1),l===46?s===-1?s=p:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||c===-1||u===0||u===1&&s===c-1&&s===r+1?c!==-1&&(r===0&&a?t.base=t.name=e.slice(1,c):t.base=t.name=e.slice(r,c)):(r===0&&a?(t.name=e.slice(1,s),t.base=e.slice(1,c)):(t.name=e.slice(r,s),t.base=e.slice(r,c)),t.ext=e.slice(s,c)),r>0?t.dir=e.slice(0,r-1):a&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};oe.posix=oe;var _n=oe;const nt=ht(_n),mn={key:2},vn=P({__name:"SidebarItem",props:{item:{},basePath:{default:""}},setup(o){const e=o,t=I(()=>{var r;return(r=e.item.meta)==null?void 0:r.alwaysShow}),l=I(()=>{var r;return((r=e.item.children)==null?void 0:r.filter(c=>{var _;return!((_=c.meta)!=null&&_.hidden)}))??[]}),a=I(()=>l.value.length),n=I(()=>{const r=a.value;switch(!0){case r>1:return null;case r===1:return l.value[0];default:return{...e.item,path:""}}}),s=r=>{switch(!0){case he(r):return r;case he(e.basePath):return e.basePath;default:return nt.resolve(e.basePath,r)}};return(r,c)=>{const _=v("SvgIcon"),p=v("el-menu-item"),u=v("SidebarItem",!0),b=v("el-sub-menu");return!t.value&&n.value&&!n.value.children?(f(),$(q,{key:0},[n.value.meta?(f(),x(fn,{key:0,to:s(n.value.path)},{default:m(()=>[i(p,{index:s(n.value.path)},rt({default:m(()=>[n.value.meta.svgIcon?(f(),x(_,{key:0,name:n.value.meta.svgIcon},null,8,["name"])):n.value.meta.elIcon?(f(),x(ie(n.value.meta.elIcon),{key:1,class:"el-icon"})):R("",!0)]),_:2},[n.value.meta.title?{name:"title",fn:m(()=>[W(B(n.value.meta.title),1)]),key:"0"}:void 0]),1032,["index"])]),_:1},8,["to"])):R("",!0)],64)):(f(),x(b,{key:1,index:s(e.item.path),teleported:""},{title:m(()=>{var h,g,C;return[(h=e.item.meta)!=null&&h.svgIcon?(f(),x(_,{key:0,name:e.item.meta.svgIcon},null,8,["name"])):(g=e.item.meta)!=null&&g.elIcon?(f(),x(ie(e.item.meta.elIcon),{key:1,class:"el-icon"})):R("",!0),(C=e.item.meta)!=null&&C.title?(f(),$("span",mn,B(e.item.meta.title),1)):R("",!0)]}),default:m(()=>[e.item.children?(f(!0),$(q,{key:0},j(l.value,h=>(f(),x(u,{key:h.path,item:h,"base-path":s(h.path)},null,8,["item","base-path"]))),128)):R("",!0)]),_:1},8,["index"]))}}}),hn=F(vn,[["__scopeId","data-v-871eecd2"]]),gn="/static/logo-BY3URNHQ.png",yn="/static/logo-text-1-CHuEm79x.png",bn="/static/logo-text-2-CVewf8RJ.png",wn=["src"],Cn=["src"],Sn=P({__name:"index",props:{collapse:{type:Boolean,default:!0}},setup(o){const e=o,{isLeft:t,isTop:l}=ce();return(a,n)=>{const s=v("router-link");return f(),$("div",{class:U(["layout-logo-container",{collapse:e.collapse,"layout-mode-top":d(l)}])},[i(We,{name:"layout-logo-fade"},{default:m(()=>[e.collapse?(f(),x(s,{key:"collapse",to:"/"},{default:m(()=>[S("img",{src:d(gn),class:"layout-logo"},null,8,wn)]),_:1})):(f(),x(s,{key:"expand",to:"/"},{default:m(()=>[S("img",{src:d(t)?d(yn):d(bn),class:"layout-logo-text"},null,8,Cn)]),_:1}))]),_:1})],2)}}}),Ee=F(Sn,[["__scopeId","data-v-18112349"]]),_e=o=>{let e="";try{e=getComputedStyle(document.documentElement).getPropertyValue(o)}catch(t){console.error(t)}return e},Pe=(o,e)=>{try{document.documentElement.style.setProperty(o,e)}catch(t){console.error(t)}},kn=()=>{pt(),location.reload()},xn=P({__name:"index",setup(o){Ue(w=>({"7512f1ca":N.value,"5e631f98":M.value,"5f183ec2":H.value,"6aacdfea":z.value,a99c0206:E.value}));const e=_e("--v3-sidebar-menu-bg-color"),t=_e("--v3-sidebar-menu-text-color"),l=_e("--v3-sidebar-menu-active-text-color"),{isMobile:a}=re(),{isLeft:n,isTop:s}=ce(),r=ue(),c=le(),_=Se(),p=J(),u=I(()=>{const{meta:{activeMenu:w},path:T}=r;return w||T}),b=I(()=>_.routes.filter(w=>{var T;return!((T=w.meta)!=null&&T.hidden)})),h=I(()=>!c.sidebar.opened),g=I(()=>n.value&&p.showLogo),C=I(()=>n.value?e:void 0),y=I(()=>n.value?t:void 0),E=I(()=>n.value?l:void 0),H=I(()=>s.value?"var(--v3-navigationbar-height)":"var(--v3-sidebar-menu-item-height)"),z=I(()=>s.value?"transparent":"var(--v3-sidebar-menu-hover-bg-color)"),N=I(()=>s.value?"0px":"2px"),M=I(()=>s.value?"none":"block");return(w,T)=>{const A=v("el-menu"),k=v("el-scrollbar");return f(),$("div",{class:U({"has-logo":g.value})},[g.value?(f(),x(Ee,{key:0,collapse:h.value},null,8,["collapse"])):R("",!0),i(k,{"wrap-class":"scrollbar-wrapper"},{default:m(()=>[i(A,{"default-active":u.value,collapse:h.value&&!d(s),"background-color":C.value,"text-color":y.value,"active-text-color":E.value,"unique-opened":!0,"collapse-transition":!1,mode:d(s)&&!d(a)?"horizontal":"vertical"},{default:m(()=>[(f(!0),$(q,null,j(b.value,L=>(f(),x(hn,{key:L.path,item:L,"base-path":L.path},null,8,["item","base-path"]))),128))]),_:1},8,["default-active","collapse","background-color","text-color","active-text-color","mode"])]),_:1})],2)}}}),Me=F(xn,[["__scopeId","data-v-fd7996dd"]]),Tn={class:"card-header"},$n={class:"card-title"},En={class:"card-time"},Mn={key:0,class:"card-avatar"},Vn=["src"],In={class:"card-body"},Ln=P({__name:"NotifyList",props:{list:{}},setup(o){const e=o;return(t,l)=>{const a=v("el-empty"),n=v("el-tag"),s=v("el-card");return e.list.length===0?(f(),x(a,{key:0})):(f(!0),$(q,{key:1},j(e.list,(r,c)=>(f(),x(s,{key:c,shadow:"never",class:"card-container"},{header:m(()=>[S("div",Tn,[S("div",null,[S("span",null,[S("span",$n,B(r.title),1),r.extra?(f(),x(n,{key:0,type:r.status,effect:"plain",size:"small"},{default:m(()=>[W(B(r.extra),1)]),_:2},1032,["type"])):R("",!0)]),S("div",En,B(r.datetime),1)]),r.avatar?(f(),$("div",Mn,[S("img",{src:r.avatar,width:"34"},null,8,Vn)])):R("",!0)])]),default:m(()=>[S("div",In,B(r.description??"No Data"),1)]),_:2},1024))),128))}}}),An=F(Ln,[["__scopeId","data-v-64257dd7"]]),Rn=[{avatar:"https://gw.alipayobjects.com/zos/rmsportal/OKJXDXrmkNshAMvwtvhu.png",title:"V3 Admin Vite 上线啦",datetime:"一年前",description:"一个免费开源的中后台管理系统基础解决方案，基于 Vue3、TypeScript、Element Plus、Pinia 和 Vite 等主流技术"},{avatar:"https://gw.alipayobjects.com/zos/rmsportal/OKJXDXrmkNshAMvwtvhu.png",title:"V3 Admin 上线啦",datetime:"两年前",description:"一个中后台管理系统基础解决方案，基于 Vue3、TypeScript、Element Plus 和 Pinia"}],Dn=[{avatar:"https://gw.alipayobjects.com/zos/rmsportal/ThXAXghbEsBCCSDihZxY.png",title:"来自楚门的世界",description:"如果再也不能见到你，祝你早安、午安和晚安",datetime:"1998-06-05"},{avatar:"https://gw.alipayobjects.com/zos/rmsportal/ThXAXghbEsBCCSDihZxY.png",title:"来自大话西游",description:"如果非要在这份爱上加上一个期限，我希望是一万年",datetime:"1995-02-04"},{avatar:"https://gw.alipayobjects.com/zos/rmsportal/ThXAXghbEsBCCSDihZxY.png",title:"来自龙猫",description:"心存善意，定能途遇天使",datetime:"1988-04-16"}],Pn=[{title:"任务名称",description:"这家伙很懒，什么都没留下",extra:"未开始",status:"info"},{title:"任务名称",description:"这家伙很懒，什么都没留下",extra:"进行中",status:"primary"},{title:"任务名称",description:"这家伙很懒，什么都没留下",extra:"已超时",status:"danger"}],Fn={class:"notify"},Nn={class:"notify-history"},Fe=99,Hn=350,zn=P({__name:"index",setup(o){const e=I(()=>l.value.reduce((n,s)=>n+s.list.length,0)),t=D("通知"),l=D([{name:"通知",type:"primary",list:Rn},{name:"消息",type:"danger",list:Dn},{name:"待办",type:"warning",list:Pn}]),a=()=>{se.success(`跳转到${t.value}历史页面`)};return(n,s)=>{const r=v("el-icon"),c=v("el-tooltip"),_=v("el-badge"),p=v("el-scrollbar"),u=v("el-tab-pane"),b=v("el-tabs"),h=v("el-button"),g=v("el-popover");return f(),$("div",Fn,[i(g,{placement:"bottom",width:Hn,trigger:"click"},{reference:m(()=>[i(_,{value:e.value,max:Fe,hidden:e.value===0},{default:m(()=>[i(c,{effect:"dark",content:"消息通知",placement:"bottom"},{default:m(()=>[i(r,{size:20},{default:m(()=>[i(d(gt))]),_:1})]),_:1})]),_:1},8,["value","hidden"])]),default:m(()=>[i(b,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=C=>t.value=C),class:"demo-tabs",stretch:""},{default:m(()=>[(f(!0),$(q,null,j(l.value,(C,y)=>(f(),x(u,{name:C.name,key:y},{label:m(()=>[W(B(C.name)+" ",1),i(_,{value:C.list.length,max:Fe,type:C.type},null,8,["value","type"])]),default:m(()=>[i(p,{height:"400px"},{default:m(()=>[i(An,{list:C.list},null,8,["list"])]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),S("div",Nn,[i(h,{link:"",onClick:a},{default:m(()=>[W("查看"+B(t.value)+"历史",1)]),_:1})])]),_:1})])}}}),Bn=F(zn,[["__scopeId","data-v-530289d9"]]),Ne=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Y=(()=>{if(typeof document>"u")return!1;const o=Ne[0],e={};for(const t of Ne)if((t==null?void 0:t[1])in document){for(const[a,n]of t.entries())e[o[a]]=n;return e}return!1})(),He={change:Y.fullscreenchange,error:Y.fullscreenerror};let X={request(o=document.documentElement,e){return new Promise((t,l)=>{const a=()=>{X.off("change",a),t()};X.on("change",a);const n=o[Y.requestFullscreen](e);n instanceof Promise&&n.then(a).catch(l)})},exit(){return new Promise((o,e)=>{if(!X.isFullscreen){o();return}const t=()=>{X.off("change",t),o()};X.on("change",t);const l=document[Y.exitFullscreen]();l instanceof Promise&&l.then(t).catch(e)})},toggle(o,e){return X.isFullscreen?X.exit():X.request(o,e)},onchange(o){X.on("change",o)},onerror(o){X.on("error",o)},on(o,e){const t=He[o];t&&document.addEventListener(t,e,!1)},off(o,e){const t=He[o];t&&document.removeEventListener(t,e,!1)},raw:Y};Object.defineProperties(X,{isFullscreen:{get:()=>!!document[Y.fullscreenElement]},element:{enumerable:!0,get:()=>document[Y.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[Y.fullscreenEnabled]}});Y||(X={isEnabled:!1});const Z=X,On=P({__name:"index",props:{element:{default:"html"},openTips:{default:"全屏"},exitTips:{default:"退出全屏"},content:{type:Boolean,default:!1}},setup(o){const e=o,t=D(!1),l=I(()=>t.value?e.exitTips:e.openTips),a=I(()=>t.value?"fullscreen-exit":"fullscreen"),n=()=>{const b=document.querySelector(e.element)||void 0;Z.isEnabled?Z.toggle(b):se.warning("您的浏览器无法工作")},s=()=>{t.value=Z.isFullscreen,t.value||(document.body.className="")};ve(b=>{Z.isEnabled&&Z.on("change",s),b(()=>{Z.isEnabled&&Z.off("change",s)})});const r=D(!1),c=I(()=>r.value?"内容区复原":"内容区放大"),_=I(()=>r.value?"fullscreen-exit":"fullscreen"),p=()=>{r.value=!r.value,document.body.className=r.value?"content-large":""},u=()=>{r.value&&p(),document.body.className="content-full",n()};return(b,h)=>{const g=v("SvgIcon"),C=v("el-tooltip"),y=v("el-dropdown-item"),E=v("el-dropdown-menu"),H=v("el-dropdown");return f(),$("div",null,[b.content?(f(),x(H,{key:1,disabled:t.value},{dropdown:m(()=>[i(E,null,{default:m(()=>[i(y,{onClick:p},{default:m(()=>[W(B(c.value),1)]),_:1}),i(y,{onClick:u},{default:m(()=>[W("内容区全屏")]),_:1})]),_:1})]),default:m(()=>[i(g,{name:_.value},null,8,["name"])]),_:1},8,["disabled"])):(f(),x(C,{key:0,effect:"dark",content:l.value,placement:"bottom"},{default:m(()=>[i(g,{name:a.value,onClick:n},null,8,["name"])]),_:1},8,["content"]))])}}}),ot=F(On,[["__scopeId","data-v-03889db8"]]),Wn=["onMouseenter"],Un={class:"result-item-title"},qn=P({__name:"SearchResult",props:ct({list:{},isPressUpOrDown:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(o,{expose:e}){const t=qe(o,"modelValue"),l=o,a=Xe(),n=D(0),s=p=>{const u=p.name===t.value;return{background:u?"var(--el-color-primary)":"",color:u?"#ffffff":""}},r=p=>{l.isPressUpOrDown||(t.value=p.name)},c=()=>{n.value=Number((window.innerHeight*.4).toFixed(1))},_=p=>{var g;const u=(g=a==null?void 0:a.proxy)==null?void 0:g.$refs[`resultItemRef${p}`];if(!u)return 0;const h=u[0].offsetTop+128;return h>n.value?h-n.value:0};return Be(()=>{window.addEventListener("resize",c)}),ge(()=>{c()}),Oe(()=>{window.removeEventListener("resize",c)}),e({getScrollTop:_}),(p,u)=>{const b=v("SvgIcon");return f(),$("div",null,[(f(!0),$(q,null,j(p.list,(h,g)=>{var C,y,E;return f(),$("div",{key:g,ref_for:!0,ref:`resultItemRef${g}`,class:"result-item",style:Ke(s(h)),onMouseenter:H=>r(h)},[(C=h.meta)!=null&&C.svgIcon?(f(),x(b,{key:0,name:h.meta.svgIcon},null,8,["name"])):(y=h.meta)!=null&&y.elIcon?(f(),x(ie(h.meta.elIcon),{key:1,class:"el-icon"})):R("",!0),S("span",Un,B((E=h.meta)==null?void 0:E.title),1),t.value&&t.value===h.name?(f(),x(b,{key:2,name:"keyboard-enter"})):R("",!0)],44,Wn)}),128))])}}}),Xn=F(qn,[["__scopeId","data-v-3834d52e"]]),Ve=o=>(be("data-v-c0301a15"),o=o(),we(),o),Kn={class:"search-footer"},Gn={class:"search-footer-item"},jn=Ve(()=>S("span",null,"确认",-1)),Jn={class:"search-footer-item"},Yn=Ve(()=>S("span",null,"切换",-1)),Zn={class:"search-footer-item"},Qn=Ve(()=>S("span",null,"关闭",-1)),eo={class:"search-footer-total"},to=P({__name:"SearchFooter",props:{total:{}},setup(o){const e=o,{isMobile:t}=re();return(l,a)=>{const n=v("SvgIcon");return f(),$("div",Kn,[d(t)?R("",!0):(f(),$(q,{key:0},[S("span",Gn,[i(n,{name:"keyboard-enter"}),jn]),S("span",Jn,[i(n,{name:"keyboard-up"}),i(n,{name:"keyboard-down"}),Yn]),S("span",Zn,[i(n,{name:"keyboard-esc"}),Qn])],64)),S("span",eo,"共 "+B(e.total)+" 项",1)])}}}),no=F(to,[["__scopeId","data-v-c0301a15"]]),oo=S("p",null,"搜索结果",-1),so=P({__name:"SearchModal",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(o){const e=qe(o,"modelValue"),t=ye(),{isMobile:l}=re(),a=D(null),n=D(null),s=D(null),r=D(""),c=it([]),_=D(void 0),p=D(!1),u=I(()=>l.value?"80vw":"40vw"),b=I(()=>yt(Se().routes)),h=bt(()=>{var T;const M=g(b.value);c.value=M.filter(A=>{var k,L;return r.value?(L=(k=A.meta)==null?void 0:k.title)==null?void 0:L.toLocaleLowerCase().includes(r.value.toLocaleLowerCase().trim()):!1});const w=(T=c.value)==null?void 0:T.length;_.value=w>0?c.value[0].name:void 0},500),g=(M,w=[])=>(M.forEach(T=>{w.push(T),T.children&&g(T.children,w)}),w),C=()=>{e.value=!1,setTimeout(()=>{r.value="",c.value=[]},200)},y=M=>{var T;if(!s.value)return;const w=s.value.getScrollTop(M);(T=n.value)==null||T.setScrollTop(w)},E=()=>{p.value=!0;const{length:M}=c.value;if(M===0)return;const w=c.value.findIndex(T=>T.name===_.value);if(w===0){const T=c.value[M-1].name;_.value===T&&M>1?(_.value=c.value[M-2].name,y(M-2)):(_.value=T,y(M-1))}else _.value=c.value[w-1].name,y(w-1)},H=()=>{p.value=!0;const{length:M}=c.value;if(M===0)return;const w=c.value.map(T=>T.name).lastIndexOf(_.value);if(w===M-1){const T=c.value[0].name;_.value===T&&M>1?(_.value=c.value[1].name,y(1)):(_.value=T,y(0))}else _.value=c.value[w+1].name,y(w+1)},z=()=>{var A;const{length:M}=c.value;if(M===0)return;const w=_.value,T=(A=c.value.find(k=>k.name===w))==null?void 0:A.path;if(T&&he(T)){window.open(T,"_blank","noopener, noreferrer");return}if(!w){se.warning("无法通过搜索进入该菜单，请为对应的路由设置唯一的 Name");return}try{t.push({name:w})}catch{se.error("该菜单有必填的动态参数，无法通过搜索进入");return}C()},N=()=>{p.value=!1};return(M,w)=>{const T=v("SvgIcon"),A=v("el-input"),k=v("el-empty"),L=v("el-dialog");return f(),x(L,{modelValue:e.value,"onUpdate:modelValue":w[2]||(w[2]=O=>e.value=O),onOpened:w[3]||(w[3]=O=>{var V;return(V=a.value)==null?void 0:V.focus()}),onClosed:w[4]||(w[4]=O=>{var V;return(V=a.value)==null?void 0:V.blur()}),onKeydown:[fe(E,["up"]),fe(H,["down"]),fe(z,["enter"])],onKeyup:fe(N,["up","down"]),"before-close":C,width:u.value,top:"5vh",class:"search-modal__private","append-to-body":""},{footer:m(()=>[i(no,{total:c.value.length},null,8,["total"])]),default:m(()=>[i(A,{ref_key:"inputRef",ref:a,modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=O=>r.value=O),onInput:d(h),placeholder:"搜索菜单",size:"large",clearable:""},{prefix:m(()=>[i(T,{name:"search"})]),_:1},8,["modelValue","onInput"]),c.value.length===0?(f(),x(k,{key:0,description:"暂无搜索结果","image-size":100})):(f(),$(q,{key:1},[oo,i(d(Ze),{ref_key:"scrollbarRef",ref:n,"max-height":"40vh",always:""},{default:m(()=>[i(Xn,{ref_key:"searchResultRef",ref:s,modelValue:_.value,"onUpdate:modelValue":w[1]||(w[1]=O=>_.value=O),list:c.value,isPressUpOrDown:p.value,onClick:z},null,8,["modelValue","list","isPressUpOrDown"])]),_:1},512)],64))]),_:1},8,["modelValue","width"])}}}),ao=P({__name:"index",setup(o){const e=D(!1),t=()=>{e.value=!0};return(l,a)=>{const n=v("SvgIcon"),s=v("el-tooltip");return f(),$("div",null,[i(s,{effect:"dark",content:"搜索菜单",placement:"bottom"},{default:m(()=>[i(n,{name:"search",onClick:t})]),_:1}),i(so,{modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=r=>e.value=r)},null,8,["modelValue"])])}}}),lo=F(ao,[["__scopeId","data-v-08a5029a"]]),ro=o=>(be("data-v-3a617b38"),o=o(),we(),o),co={class:"navigation-bar"},io={class:"right-menu"},uo={class:"right-menu-avatar"},fo={target:"_blank",href:"https://github.com/un-pany/v3-admin-vite"},po={target:"_blank",href:"https://gitee.com/un-pany/v3-admin-vite"},_o=ro(()=>S("span",{style:{display:"block"}},"退出登录",-1)),mo=P({__name:"index",setup(o){const{isMobile:e}=re(),{isTop:t}=ce(),l=ye(),a=le(),n=Ye(),s=J(),{showNotify:r,showThemeSwitch:c,showScreenfull:_,showSearchMenu:p}=ae(s),u=()=>{a.toggleSidebar(!1)},b=()=>{n.logout(),l.push("/login")};return(h,g)=>{const C=v("el-avatar"),y=v("el-dropdown-item"),E=v("el-dropdown-menu"),H=v("el-dropdown");return f(),$("div",co,[!d(t)||d(e)?(f(),x(Qt,{key:0,"is-active":d(a).sidebar.opened,class:"hamburger",onToggleClick:u},null,8,["is-active"])):R("",!0),!d(t)||d(e)?(f(),x(un,{key:1,class:"breadcrumb"})):R("",!0),d(t)&&!d(e)?(f(),x(Me,{key:2,class:"sidebar"})):R("",!0),S("div",io,[d(p)?(f(),x(lo,{key:0,class:"right-menu-item"})):R("",!0),d(_)?(f(),x(ot,{key:1,class:"right-menu-item"})):R("",!0),d(c)?(f(),x(It,{key:2,class:"right-menu-item"})):R("",!0),d(r)?(f(),x(Bn,{key:3,class:"right-menu-item"})):R("",!0),i(H,{class:"right-menu-item"},{dropdown:m(()=>[i(E,null,{default:m(()=>[S("a",fo,[i(y,null,{default:m(()=>[W("GitHub")]),_:1})]),S("a",po,[i(y,null,{default:m(()=>[W("Gitee")]),_:1})]),i(y,{divided:"",onClick:b},{default:m(()=>[_o]),_:1})]),_:1})]),default:m(()=>[S("div",uo,[i(C,{icon:d(wt),size:30},null,8,["icon"]),S("span",null,B(d(n).username),1)])]),_:1})])])}}}),Ie=F(mo,[["__scopeId","data-v-3a617b38"]]),vo={class:"select-layout-mode"},ho=P({__name:"SelectLayoutMode",setup(o){const{isLeft:e,isTop:t,isLeftTop:l,setLayoutMode:a}=ce();return(n,s)=>{const r=v("el-aside"),c=v("el-header"),_=v("el-main"),p=v("el-container"),u=v("el-tooltip");return f(),$("div",vo,[i(u,{content:"左侧模式"},{default:m(()=>[i(p,{class:U(["layout-mode left",{active:d(e)}]),onClick:s[0]||(s[0]=b=>d(a)(d(ee).Left))},{default:m(()=>[i(r),i(p,null,{default:m(()=>[i(c),i(_)]),_:1})]),_:1},8,["class"])]),_:1}),i(u,{content:"顶部模式"},{default:m(()=>[i(p,{class:U(["layout-mode top",{active:d(t)}]),onClick:s[1]||(s[1]=b=>d(a)(d(ee).Top))},{default:m(()=>[i(c),i(_)]),_:1},8,["class"])]),_:1}),i(u,{content:"混合模式"},{default:m(()=>[i(p,{class:U(["layout-mode left-top",{active:d(l)}]),onClick:s[2]||(s[2]=b=>d(a)(d(ee).LeftTop))},{default:m(()=>[i(c),i(p,null,{default:m(()=>[i(r),i(_)]),_:1})]),_:1},8,["class"])]),_:1})])}}}),go=F(ho,[["__scopeId","data-v-c73872da"]]),st=o=>(be("data-v-1fc3e29f"),o=o(),we(),o),yo={class:"setting-container"},bo=st(()=>S("h4",null,"布局配置",-1)),wo=st(()=>S("h4",null,"功能配置",-1)),Co={class:"setting-name"},So=P({__name:"index",setup(o){const{isLeft:e}=ce(),t=J(),{showTagsView:l,showLogo:a,fixedHeader:n,showFooter:s,showNotify:r,showThemeSwitch:c,showScreenfull:_,showSearchMenu:p,cacheTagsView:u,showWatermark:b,showGreyMode:h,showColorWeakness:g}=ae(t),C={显示标签栏:l,"显示 Logo":a,"固定 Header":n,"显示页脚 Footer":s,显示消息通知:r,显示切换主题按钮:c,显示全屏按钮:_,显示搜索按钮:p,是否缓存标签栏:u,开启系统水印:b,显示灰色模式:h,显示色弱模式:g};return ve(()=>{!e.value&&(n.value=!0)}),(y,E)=>{const H=v("el-divider"),z=v("el-switch"),N=v("el-button");return f(),$("div",yo,[bo,i(go),i(H),wo,(f(),$(q,null,j(C,(M,w,T)=>S("div",{class:"setting-item",key:T},[S("span",Co,B(w),1),i(z,{modelValue:M.value,"onUpdate:modelValue":A=>M.value=A,disabled:!d(e)&&w==="固定 Header"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),64)),i(N,{type:"danger",icon:d(Ct),onClick:d(kn)},{default:m(()=>[W("重 置")]),_:1},8,["icon","onClick"])])}}}),ko=F(So,[["__scopeId","data-v-1fc3e29f"]]),xo={class:"scroll-container"},To=200,$o=P({__name:"ScrollPane",props:{tagRefs:{}},setup(o){const e=o,t=ue(),l=J(),{listenerRouteChange:a}=Ce(),n=D(),s=D();let r=0;const c=({scrollLeft:h})=>{r=h},_=({deltaY:h})=>{/^-/.test(h.toString())?u("left"):u("right")},p=()=>{const h=s.value.clientWidth,g=n.value.wrapRef.clientWidth,C=h-g-r;return{scrollbarContentRefWidth:h,scrollbarRefWidth:g,lastDistance:C}},u=(h,g=To)=>{let C=0;const{scrollbarContentRefWidth:y,scrollbarRefWidth:E,lastDistance:H}=p();E>y||(h==="left"?C=Math.max(0,r-g):C=Math.min(r+g,r+H),n.value.setScrollLeft(C))},b=()=>{const h=e.tagRefs;for(let g=0;g<h.length;g++)if(t.path===h[g].$props.to.path){const C=h[g].$el,y=C.offsetWidth,E=C.offsetLeft,{scrollbarRefWidth:H}=p();if(E<r){const N=r-E;u("left",N);return}const z=H+r-y;if(E>z){const N=E-z;u("right",N);return}}};return a(()=>{Ge(b)}),(h,g)=>{const C=v("el-icon");return f(),$("div",xo,[i(C,{class:"arrow left",onClick:g[0]||(g[0]=y=>u("left"))},{default:m(()=>[i(d(St))]),_:1}),i(d(Ze),{ref_key:"scrollbarRef",ref:n,onWheelPassive:_,onScroll:c},{default:m(()=>[S("div",{ref_key:"scrollbarContentRef",ref:s,class:"scrollbar-content"},[me(h.$slots,"default",{},void 0,!0)],512)]),_:3},512),i(C,{class:"arrow right",onClick:g[1]||(g[1]=y=>u("right"))},{default:m(()=>[i(d(kt))]),_:1}),d(l).showScreenfull?(f(),x(ot,{key:0,content:!0,class:"screenfull"})):R("",!0)])}}}),Eo=F($o,[["__scopeId","data-v-93122cdc"]]),Mo={class:"tags-view-container"},Vo=P({__name:"index",setup(o){const e=Xe(),t=ye(),l=ue(),a=Je(),n=Se(),{listenerRouteChange:s}=Ce(),r=D([]),c=D(!1),_=D(0),p=D(0),u=D({});let b=[];const h=k=>k.path===l.path,g=k=>{var L;return(L=k.meta)==null?void 0:L.affix},C=(k,L="/")=>{const O=[];return k.forEach(V=>{if(g(V)){const K=nt.resolve(L,V.path);O.push({fullPath:K,path:K,name:V.name,meta:{...V.meta}})}if(V.children){const K=C(V.children,V.path);O.push(...K)}}),O},y=()=>{b=C(n.routes);for(const k of b)k.name&&a.addVisitedView(k)},E=k=>{k.name&&(a.addVisitedView(k),a.addCachedView(k))},H=k=>{a.delCachedView(k),t.replace({path:"/redirect"+k.path,query:k.query})},z=k=>{a.delVisitedView(k),a.delCachedView(k),h(k)&&w(a.visitedViews,k)},N=()=>{const k=u.value.fullPath;k!==l.path&&k!==void 0&&t.push(k),a.delOthersVisitedViews(u.value),a.delOthersCachedViews(u.value)},M=k=>{a.delAllVisitedViews(),a.delAllCachedViews(),!b.some(L=>L.path===l.path)&&w(a.visitedViews,k)},w=(k,L)=>{const O=k.slice(-1)[0],V=O==null?void 0:O.fullPath;V!==void 0?t.push(V):L.name==="Dashboard"?t.push({path:"/redirect"+L.path,query:L.query}):t.push("/")},T=(k,L)=>{const V=e.proxy.$el.getBoundingClientRect().left,ke=e.proxy.$el.offsetWidth-105,Ae=L.clientX-V+15;p.value=Ae>ke?ke:Ae,_.value=L.clientY,c.value=!0,u.value=k},A=()=>{c.value=!1};return Te(c,k=>{k?document.body.addEventListener("click",A):document.body.removeEventListener("click",A)}),ge(()=>{y(),s(async k=>{E(k)},!0)}),(k,L)=>{const O=v("el-icon");return f(),$("div",Mo,[i(Eo,{class:"tags-view-wrapper","tag-refs":r.value},{default:m(()=>[(f(!0),$(q,null,j(d(a).visitedViews,V=>(f(),x(d(ut),{ref_for:!0,ref_key:"tagRefs",ref:r,key:V.path,class:U([{active:h(V)},"tags-view-item"]),to:{path:V.path,query:V.query},onMouseup:pe(K=>!g(V)&&z(V),["middle"]),onContextmenu:pe(K=>T(V,K),["prevent"])},{default:m(()=>{var K;return[W(B((K=V.meta)==null?void 0:K.title)+" ",1),g(V)?R("",!0):(f(),x(O,{key:0,size:12,onClick:pe(ke=>z(V),["prevent","stop"])},{default:m(()=>[i(d(xt))]),_:2},1032,["onClick"]))]}),_:2},1032,["class","to","onMouseup","onContextmenu"]))),128))]),_:1},8,["tag-refs"]),te(S("ul",{class:"contextmenu",style:Ke({left:p.value+"px",top:_.value+"px"})},[S("li",{onClick:L[0]||(L[0]=V=>H(u.value))},"刷新"),g(u.value)?R("",!0):(f(),$("li",{key:0,onClick:L[1]||(L[1]=V=>z(u.value))},"关闭")),S("li",{onClick:N},"关闭其它"),S("li",{onClick:L[2]||(L[2]=V=>M(u.value))},"关闭所有")],4),[[ne,c.value]])])}}}),Le=F(Vo,[["__scopeId","data-v-e12a26c9"]]),Io=P({__name:"index",props:{buttonTop:{default:350}},setup(o){Ue(a=>({57869733:t}));const t=o.buttonTop+"px",l=D(!1);return(a,n)=>{const s=v("el-icon"),r=v("el-drawer");return f(),$(q,null,[S("div",{class:"handle-button",onClick:n[0]||(n[0]=c=>l.value=!0)},[i(s,{size:24},{default:m(()=>[i(d(Tt))]),_:1})]),i(r,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=c=>l.value=c),size:"300px","with-header":!1},{default:m(()=>[me(a.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue"])],64)}}}),Lo=F(Io,[["__scopeId","data-v-6935ad0e"]]),Ao=P({__name:"LeftMode",setup(o){const{isMobile:e}=re(),t=le(),l=J(),{showTagsView:a,fixedHeader:n}=ae(l),s=I(()=>({hideSidebar:!t.sidebar.opened,openSidebar:t.sidebar.opened,withoutAnimation:t.sidebar.withoutAnimation,mobile:e.value})),r=()=>{t.closeSidebar(!1)};return(c,_)=>(f(),$("div",{class:U([s.value,"app-wrapper"])},[s.value.mobile&&s.value.openSidebar?(f(),$("div",{key:0,class:"drawer-bg",onClick:r})):R("",!0),i(d(Me),{class:"sidebar-container"}),S("div",{class:U([{hasTagsView:d(a)},"main-container"])},[S("div",{class:U([{"fixed-header":d(n)},"layout-header"])},[i(d(Ie)),te(i(d(Le),null,null,512),[[ne,d(a)]])],2),i(d($e),{class:"app-main"})],2)],2))}}),Ro=F(Ao,[["__scopeId","data-v-6fea05d2"]]),Do={class:"app-wrapper"},Po={class:"fixed-header layout-header"},Fo={class:"content"},No=P({__name:"TopMode",setup(o){const e=J(),{showTagsView:t,showLogo:l}=ae(e);return(a,n)=>(f(),$("div",Do,[S("div",Po,[S("div",Fo,[d(l)?(f(),x(d(Ee),{key:0,collapse:!1,class:"logo"})):R("",!0),i(d(Ie),{class:"navigation-bar"})]),te(i(d(Le),null,null,512),[[ne,d(t)]])]),S("div",{class:U([{hasTagsView:d(t)},"main-container"])},[i(d($e),{class:"app-main"})],2)]))}}),Ho=F(No,[["__scopeId","data-v-214c1b76"]]),zo={class:"fixed-header layout-header"},Bo={class:"content"},Oo=P({__name:"LeftTopMode",setup(o){const e=le(),t=J(),{showTagsView:l,showLogo:a}=ae(t),n=I(()=>({hideSidebar:!e.sidebar.opened}));return(s,r)=>(f(),$("div",{class:U([n.value,"app-wrapper"])},[S("div",zo,[d(a)?(f(),x(d(Ee),{key:0,collapse:!1,class:"logo"})):R("",!0),S("div",Bo,[i(d(Ie)),te(i(d(Le),null,null,512),[[ne,d(l)]])])]),S("div",{class:U([{hasTagsView:d(l)},"main-container"])},[i(d(Me),{class:"sidebar-container"}),i(d($e),{class:"app-main"})],2)],2))}}),Wo=F(Oo,[["__scopeId","data-v-134c0ec9"]]),Uo="/static/logo-sSbhS2d3.jpg",qo={class:"layout-aside-main"},Xo={class:"history-title"},Ko=["onMouseenter","onClick"],Go={class:"chat-title"},jo={class:"dialog-footer"},Jo=P({__name:"index",setup(o){const e=Ye(),t=Qe(),l=et(),a=D(null),n=D(),s=ze({id:"",name:"",chat_type:"",create_time:""}),r=D(!1);function c(y){l.onSelectConversation(y),l.getChatHistory()}function _(){Ge(()=>{a.value&&(a.value.scrollTop=0)})}async function p(){const y=await Lt({user_id:e.token,name:"新对话",chat_type:l.chat_type});await t.getConversations(),l.onSelectConversation(y.id),l.getChatHistory(),_()}async function u(y){await Rt(y),await t.getConversations(),se({type:"success",message:"删除成功"}),l.conversation_id===y&&l.onSelectConversation()}function b(y){Vt.confirm("删除后不可恢复，确认删除该对话吗？","确认删除",{type:"warning"}).then(()=>{u(y)})}function h(y){s.id=y.id,s.name=y.name,r.value=!0}function g(){s.id="",s.name="",r.value=!1}async function C(){await At({conversationId:s.id,name:s.name}),await t.getConversations(),se({type:"success",message:"修改成功"}),g()}return(y,E)=>{const H=v("el-text"),z=v("CloseBold"),N=v("el-icon"),M=v("el-button"),w=v("el-input"),T=v("el-dialog");return f(),$("div",qo,[S("div",Xo,[i(H,{class:"history-label"},{default:m(()=>[W("历史记录")]),_:1}),i(N,{class:"close-icon",onClick:E[0]||(E[0]=()=>d(t).setShowHistory(!d(t).show_history))},{default:m(()=>[i(z)]),_:1})]),i(M,{icon:d($t),class:"create-chat-btn",onClick:p},{default:m(()=>[W("新建对话")]),_:1},8,["icon"]),S("ul",{class:"history-list",ref_key:"historyListUlRef",ref:a},[(f(!0),$(q,null,j(d(t).conversations,A=>(f(),$("li",{key:A.id,onMouseenter:k=>n.value=A.id,onMouseleave:E[2]||(E[2]=k=>n.value=void 0),onClick:()=>c(A.id),class:U({active:d(l).conversation_id===A.id})},[S("span",Go,B(A.name),1),te(S("span",{class:"operate",onClick:E[1]||(E[1]=k=>k.stopPropagation())},[i(M,{type:"primary",link:"",icon:d(Et),onClick:()=>h(A)},null,8,["icon","onClick"]),i(M,{type:"primary",link:"",icon:d(Mt),class:"delete-btn","auto-insert-space":!1,onClick:()=>b(A.id)},null,8,["icon","onClick"])],512),[[ne,n.value===A.id]])],42,Ko))),128))],512),i(T,{modelValue:r.value,"onUpdate:modelValue":E[4]||(E[4]=A=>r.value=A),title:"编辑",width:"30%","before-close":g},{footer:m(()=>[S("span",jo,[i(M,{onClick:g},{default:m(()=>[W("取消")]),_:1}),i(M,{type:"primary",onClick:C},{default:m(()=>[W("确认")]),_:1})])]),default:m(()=>[i(w,{modelValue:s.name,"onUpdate:modelValue":E[3]||(E[3]=A=>s.name=A)},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}}),Yo=F(Jo,[["__scopeId","data-v-f0866294"]]),Zo=o=>(be("data-v-28d987a3"),o=o(),we(),o),Qo={class:"app-chat-aside-left"},es={class:"logo"},ts=Zo(()=>S("img",{src:Uo,height:"32px"},null,-1)),ns=P({__name:"ChatLayout",setup(o){const e=D(""),t=D(!1),l=ue(),a=Se(),n=Qe(),s=Dt(),r=et(),c=I(()=>{const p=a.routes.find(u=>{var b;if(!((b=u.meta)!=null&&b.hidden)&&u.redirect==="/chat")return!0});return(p==null?void 0:p.children)||[]});ge(()=>{_(),r.setChatType(l.path),s.getLlmModels()}),Te(()=>l.path,()=>{_(),r.setChatType(l.path)});function _(){e.value=l.path}return(p,u)=>{const b=v("Operation"),h=v("el-icon"),g=v("el-tooltip"),C=v("el-menu-item"),y=v("el-menu"),E=v("el-aside"),H=v("router-view"),z=v("el-container");return f(),x(z,{class:"app-chat-container"},{default:m(()=>[i(E,{class:U({"app-chat-aside":!0,width240:!d(n).show_history,width426:d(n).show_history})},{default:m(()=>[S("div",Qo,[S("div",es,[ts,i(g,{content:"历史记录"},{default:m(()=>[te(i(h,{class:"history_icon",onClick:u[0]||(u[0]=()=>d(n).setShowHistory(!d(n).show_history))},{default:m(()=>[i(b)]),_:1},512),[[ne,!d(n).show_history]])]),_:1})]),i(y,{collapse:t.value,"default-active":e.value,router:"",class:"menu"},{default:m(()=>[(f(!0),$(q,null,j(c.value,N=>(f(),x(C,{key:N.path,index:N.path,disabled:N.path==="/knowledge"},{title:m(()=>[W(B(N.name),1)]),default:m(()=>[i(h,null,{default:m(()=>{var M;return[(f(),x(ie((M=N.props)==null?void 0:M.icon)))]}),_:2},1024)]),_:2},1032,["index","disabled"]))),128))]),_:1},8,["collapse","default-active"])]),te(i(Yo,null,null,512),[[ne,d(n).show_history]])]),_:1},8,["class"]),i(H)]),_:1})}}}),os=F(ns,[["__scopeId","data-v-28d987a3"]]),xe="--v3-tagsview-height",ss=P({__name:"index",setup(o){Nt();const{setWatermark:e,clearWatermark:t}=_t(),{isMobile:l}=re(),{isChat:a,isLeft:n,isTop:s,isLeftTop:r}=ce(),c=J(),{showSettings:_,showTagsView:p,showWatermark:u,showGreyMode:b,showColorWeakness:h}=ae(c),g=I(()=>({showGreyMode:b.value,showColorWeakness:h.value})),C=_e(xe);return ve(()=>{p.value?Pe(xe,C):Pe(xe,"0px")}),ve(()=>{u.value?e("Fufan Chat"):t()}),(y,E)=>(f(),$("div",{class:U(g.value)},[d(a)?(f(),x(os,{key:0})):d(n)||d(l)?(f(),x(Ro,{key:1})):d(s)?(f(),x(Ho,{key:2})):d(r)?(f(),x(Wo,{key:3})):R("",!0),d(_)&&!d(a)?(f(),x(d(Lo),{key:4},{default:m(()=>[i(d(ko))]),_:1})):R("",!0)],2))}}),fs=F(ss,[["__scopeId","data-v-ed5228ae"]]);export{fs as default};
